---
title: "MainCode"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(dplyr)
```
```
```
```
The purpose of the first part of our code is to clear the dataset and make it easier to read and easior to calculate.
```
```{r}
#Read Data
allData<-read.csv("WorldEconomicOutlookData.csv")
#Take a look at the data
summary(allData)
#All in char change into double
allData<-allData%>%mutate(WEO.Country.Code=as.numeric(WEO.Country.Code),"1980"=as.numeric(X1980),"1981"=as.numeric(X1981),"1982"=as.numeric(X1982),"1983"=as.numeric(X1983),"1984"=as.numeric(X1984),"1985"=as.numeric(X1985),"1986"=as.numeric(X1986),"1987"=as.numeric(X1987),"1988"=as.numeric(X1988),"1989"=as.numeric(X1989),"1990"=as.numeric(X1990),"1991"=as.numeric(X1991),"1992"=as.numeric(X1992),"1993"=as.numeric(X1993),"1994"=as.numeric(X1994),"1995"=as.numeric(X1995),"1996"=as.numeric(X1996),"1997"=as.numeric(X1997),"1998"=as.numeric(X1998),"1999"=as.numeric(X1999),"2000"=as.numeric(X2000),"2001"=as.numeric(X2001),"2002"=as.numeric(X2002),"2003"=as.numeric(X2003),"2004"=as.numeric(X2004),"2005"=as.numeric(X2005),"2006"=as.numeric(X2006),"2007"=as.numeric(X2007),"2008"=as.numeric(X2008),"2009"=as.numeric(X2009),"2010"=as.numeric(X2010),"2011"=as.numeric(X2011),"2012"=as.numeric(X2012),"2013"=as.numeric(X2013),"2014"=as.numeric(X2014),"2015"=as.numeric(X2015),"2016"=as.numeric(X2016),"2017"=as.numeric(X2017),"2018"=as.numeric(X2018),"2019"=as.numeric(X2019),"2020"=as.numeric(X2020),"2021"=as.numeric(X2021),Estimates.Start.After=as.numeric(Estimates.Start.After))
#See what the subject code means
discription<-unique(allData%>%select(WEO.Subject.Code,Subject.Descriptor,Units))
unique(discription)
#Change the subject code into something easier to understand
allData[allData$WEO.Subject.Code=="NGDP_RPCH","WEO.Subject.Code"]="NGDP(Percentage)"
allData[allData$WEO.Subject.Code=="PPPGDP","WEO.Subject.Code"]="RGDP (international dollars/Billions)"
allData[allData$WEO.Subject.Code=="NGDPRPPPPCPCH","WEO.Subject.Code"]="NGDP per person(Percentage)"
allData[allData$WEO.Subject.Code=="PCPIPCH","WEO.Subject.Code"]="Inflations rate average(Percentage)"
allData[allData$WEO.Subject.Code=="PCPIEPCH","WEO.Subject.Code"]="Inflations rate end(Percentage)"
allData[allData$WEO.Subject.Code=="LUR","WEO.Subject.Code"]="Unemployment rate(Percentage of Population)"
allData[allData$WEO.Subject.Code=="BCA_NGDPD","WEO.Subject.Code"]="Current account balance(Percentage of GDP)"
allData[allData$WEO.Subject.Code=="GGXCNL_NGDP","WEO.Subject.Code"]="Government net lending/borrowing(Percentage of GDP)"
#After making it easier to understand, get the data we want to us out
useData<-allData%>%select("Subject"=WEO.Subject.Code,Country,"1980":"2021",Estimates.Start.After)
#Drop the total NA rows
useData<-useData[-(1553:1554),]
#use pivot longer to reduce variables
useData<-useData%>%pivot_longer("1980":"2021",names_to = "Years",values_to="Value")
useData<-useData%>%mutate(Years=as.numeric(Years))
#use pivot wider to dispose different subjects
useData<-useData%>%pivot_wider(names_from = Subject,values_from=Value)
```
```
```
```
Explain the choose of variables
Country.Code, ISO, and Country are the same thing. So, we just keep the country in our useData. Also, we composed most of the information of the subject.code(units, what is it...)into the new Variable "Subject" in the useData. So, we just left the numbers from 1980 to 2021 to further use it for data visualization and calculation.
```
```
```
```{r}
#Data visualization
#See the distribution of each subject of different countries from 1980 to 2021
#For NGDP
useData%>%ggplot(title="NGDP vs Years")+geom_line(aes(x=Years,y=`NGDP(Percentage)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("NGDP vs Years")
useData%>%ggplot(title="NGDP vs Years")+geom_line(aes(x=Years,y=`NGDP per person(Percentage)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("NGDP(per person) vs Years")
#The average NGDP percentage for people is quite consistent with the overall NGDP increase percentage.It seems that the NGDP is quite chaotic for each country. However, there is an apparent sharp decrease around 1995, 2010, and 2020. We would dig deeper into it later.
#For RGDP
useData%>%ggplot()+geom_line(aes(x=Years,y=`RGDP (international dollars/Billions)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("RGDP vs Years")
#Ha, most all the percentage of the increase of RGDP are increasing but that percentage for NGDP is quite consistent. Maybe due to inflation.Check it later.
#For Inflation rate
useData%>%ggplot()+geom_line(aes(x=Years,y=`Inflations rate average(Percentage)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("Inflations rate vs Years")
useData%>%ggplot()+geom_line(aes(x=Years,y=`Inflations rate end(Percentage)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("Inflations rate vs Years")
#Seems wield that the inflation rate does not change much as the RGDP increased rapidly. Check on it.
#Unemployment rate
useData%>%ggplot()+geom_line(aes(x=Years,y=`Unemployment rate(Percentage of Population)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("Unemployment rate vs Years")
#Pretty chaos
#Government net lending/borrowing
useData%>%ggplot()+geom_line(aes(x=Years,y=`Government net lending/borrowing(Percentage of GDP)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("Government net lending/borrowing")
#Very consistent for each country.
#Current account balance
useData%>%ggplot()+geom_line(aes(x=Years,y=`Current account balance(Percentage of GDP)`,color=Country),na.rm = T)+ theme(legend.position = "none")+ggtitle("Current account balance")
#Pretty consistent between countries 
```
```
```
```{r}

```
